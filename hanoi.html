<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ahoy hanoi</title>
    <link rel="stylesheet" type="text/css" href="html/style.css">
</head>
<body>
<canvas id="myCanvas" width="400" height="300"></canvas>
</body>
<script>
    var mitte = []
    var rechts = []
    var links = []
    var stab = [links, mitte, rechts]

    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");



    async function go() {
        n = parseInt(prompt("wie viele scheiben sollen es sein?"))

        for (i = n; i > 0; i--) {
            stab[0].push(i)
        }

        console.log(stab);
        await draw()
        await h(n, 0, 1, 2)
        console.log(stab);
    }

    async function h(n, from, to, via) {

        if (n == 0) return;
        await h(n - 1, from, via, to);
        //console.log("von " + from, "nach " + to);
        await move(from, to, stab)
        await h(n - 1, via, to, from);
    }

    async function move(from, to, stab) {
        stab[to].push(stab[from].pop())
        await sleep(400)
        await draw()
    }

    function draw() {

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        var h = 20
        var x = 0
        var y = 0
        var w = 20
        ctx.fillStyle = "#00FF00";

        for (s = 0; s < stab.length; s++) {
            for (si = 0; si < stab[s].length; si++) {
                if (stab[s][si] != undefined) {
                    console.log(x + s * 120, y + si * 22, w + 2 * stab[s][si], h);
                    ctx.fillRect(x + s * 120, y + si * 22, w * stab[s][si], h);
                }
            }
        }
    }
    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    go()
</script>
</html>